(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{41:function(e,t,n){"use strict";n.r(t);var o=n(0),c=n(16),r=n.n(c),s=n(3),a=n(2),i=function(e){var t=e.filtered,n=e.setFilter;return Object(o.jsxs)("p",{children:["filter shown with: ",Object(o.jsx)("input",{value:t,onChange:function(e){n(e.target.value)}})]})},u=n(4),d=n.n(u),l="https://fso-part3-phonebook-server.herokuapp.com/api/persons",b={add:function(e,t,n,o){d.a.post(l,e).then((function(c){n(t.concat(c.data)),o({message:"".concat(e.name," was added"),style:"good"}),setTimeout((function(){o(null)}),5e3)})).catch((function(e){o({message:e.response.data.message,style:"bad"}),setTimeout((function(){o(null)}),5e3)}))},get:function(e){return d.a.get(l).then((function(t){e(t.data)}))},remove:function(e,t,n){window.confirm("Delete ".concat(e.name,"?"))&&d.a.delete("".concat(l,"/").concat(e._id)).then((function(){var o=t.filter((function(t){return t._id!==e._id}));n(o)})).catch((function(e){console.log("Could not delete",e)}))},update:function(e,t,n,o,c){if(window.confirm("".concat(e.name," is already in the phonebook, replace the old number with the new one?"))){e.number=o;var r=t.filter((function(t){return t._id!==e._id})).concat(e);d.a.put("".concat(l,"/").concat(e._id),e).then((function(){n(r),c({message:"".concat(e.name," was updated"),style:"good"}),setTimeout((function(){c(null)}),5e3)})).catch((function(e){c({message:e.response.data.message,style:"bad"}),setTimeout((function(){c(null)}),5e3)}))}}},f=function(e){var t=e.notification;return null===t?null:Object(o.jsx)("div",{style:"good"===t.style?{margin:"1rem 0",padding:".5rem 1rem",color:"white",background:"green",borderRadius:".25rem"}:{margin:"1rem 0",padding:".5rem 1rem",color:"white",background:"red",borderRadius:".25rem"},children:t.message})},j=function(e){var t=e.persons,n=e.setPersons,c=Object(a.useState)(""),r=Object(s.a)(c,2),i=r[0],u=r[1],d=Object(a.useState)(""),l=Object(s.a)(d,2),j=l[0],m=l[1],h=Object(a.useState)(null),p=Object(s.a)(h,2),O=p[0],g=p[1],v={name:i,number:j};return Object(o.jsxs)("form",{onSubmit:function(e){e.preventDefault();var o=t.map((function(e){return e.name})),c=t.find((function(e){return e.name===i}));o.includes(i)?function(e){b.update(e,t,n,j,g),u(""),m("")}(c):(b.add(v,t,n,g),u(""),m(""))},children:[Object(o.jsxs)("div",{children:["name: ",Object(o.jsx)("input",{value:i,onChange:function(e){u(e.target.value)}})]}),Object(o.jsxs)("div",{children:["number: ",Object(o.jsx)("input",{value:j,onChange:function(e){m(e.target.value)}})]}),Object(o.jsx)("button",{type:"submit",children:"add"}),Object(o.jsx)(f,{notification:O})]})},m=n(17),h=function(e){var t=e.persons,n=e.filtered,c=e.setPersons,r=(Object(m.a)(e,["persons","filtered","setPersons"]),t.filter((function(e){return-1!==e.name.toLowerCase().indexOf(n.toLowerCase())})));return Object(o.jsx)("ul",{children:r.map((function(e){return Object(o.jsxs)("li",{children:[e.name," ",e.number,Object(o.jsx)("button",{onClick:function(){return b.remove(e,t,c)},children:"DELETE"})]},e._id)}))})},p=function(){Object(a.useEffect)((function(){b.get(c)}),[]);var e=Object(a.useState)([]),t=Object(s.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(""),u=Object(s.a)(r,2),d=u[0],l=u[1];return Object(o.jsxs)("div",{children:[Object(o.jsx)("h2",{children:"Phonebook"}),Object(o.jsx)(i,{filtered:d,setFilter:l}),Object(o.jsx)("h2",{children:"add a new"}),Object(o.jsx)(j,{persons:n,setPersons:c}),Object(o.jsx)("h2",{children:"Numbers"}),Object(o.jsx)(h,{filtered:d,setFilter:l,persons:n,setPersons:c})]})};r.a.render(Object(o.jsx)(p,{}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.cbc6002c.chunk.js.map